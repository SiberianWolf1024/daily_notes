**环境配置：**

从git上拉取代码之后，使用Qt打开选择release编译，打开GNSSTools\KDDock\bin路径，将其中的两个dll文件复制到工程的build目录下与exe程序同级目录的地方

![image-20230829145056418](https://cdn.jsdelivr.net/gh/Siberianwolf926/typora_images@master/img/202308291450467.png)

![image-20230829150558537](https://cdn.jsdelivr.net/gh/Siberianwolf926/typora_images@master/img/202308291505603.png)

再打开lib目录，把其中的dll文件粘贴也到上面的exe应用程序的目录下

![image-20231120170021290](https://cdn.jsdelivr.net/gh/Siberianwolf926/typora_images@master/img/202311201700701.png)

然后把DesktopControls文件夹复制到本机Qt安装目录的对应的编译器的qml目录下

![image-20230829160209994](https://cdn.jsdelivr.net/gh/Siberianwolf926/typora_images@master/img/202308291602045.png)

架构图：

![image-20231113085441545](https://cdn.jsdelivr.net/gh/Siberianwolf926/typora_images@master/img/202311130854645.png)

CastCtrl.cpp：

1. 头文件包含：
   - 代码包含了一些自定义的头文件，如 `"CastCtrl.h"` 以及其他模块的头文件，如 `"send_raw.h"` 和 `"receive_product.h"`。

2. 构造函数 `CCastCtrl::CCastCtrl()`：
   - 初始化了类的成员变量，包括`bExsit`，一个用于控制线程退出的标志，以及`g_config.BroadFreq`。
   - 创建了一个新的线程 `pSendThread`，其中包含一个无限循环，用于监控基站线程的发送操作。
   - 循环中会等待`g_config.BroadFreq`和`Thread::g_systime`都不为0，然后遍历`m_mapThreads`，对每个基站线程调用`notify()`方法进行操作。
   - 通过`detach()`将线程分离，使其在析构函数中可以安全地结束。

3. `CCastCtrl::init()` 方法：
   - 用于初始化基站线程，接收基站信息、基站名称和配置设置作为参数。
   - 先清空`m_mapThreads`，然后创建新的线程并将其加入到`m_mapThreads`中。

4. `CCastCtrl::sendStationData()` 方法：
   - 用于发送基站数据，接收基站名称、数据指针和数据长度作为参数。
   - 根据基站名称查找对应的线程，并将数据发送给该线程。

5. `CCastCtrl::start()` 方法：
   - 用于启动基站线程，接收基站名称作为参数。
   - 根据基站名称查找对应的线程，并调用`start()`方法启动线程。

6. `CCastCtrl::stop()` 方法：
   - 用于停止基站线程，接收基站名称作为参数。
   - 根据基站名称查找对应的线程，调用`stop()`方法停止线程，并从`m_mapThreads`中删除该线程。

7. `CCastCtrl::pause()` 和 `CCastCtrl::resume()` 方法：
   - 用于暂停和继续基站线程，接收基站名称作为参数。
   - 根据基站名称查找对应的线程，并调用相应的方法。

8. `CCastCtrl::process()` 和 `CCastCtrl::speed()` 方法：
   - 用于获取基站线程的发送进度和速度，接收基站名称作为参数。
   - 根据基站名称查找对应的线程，并调用相应的方法。

9. `CCastCtrl::errorMessage()` 方法：
   - 用于获取基站线程的最后错误信息，接收基站名称作为参数。
   - 根据基站名称查找对应的线程，并返回相应的信息。

10. `CCastCtrl::seek()` 方法：
    - 用于在文件读取发送时改变发送进度，接收基站名称和进度作为参数。
    - 根据基站名称查找对应的线程，并调用相应的方法。

总之，`CCastCtrl` 类似乎用于管理和控制基站线程的启动、停止、暂停、恢复、查询状态等操作，以及发送基站数据和获取基站线程的状态信息。具体功能的实现需要查看类的成员函数的定义，以了解更多细节。

数据管理-基站信息编辑-obs-688格网配置：

![image-20231227112731015](https://cdn.jsdelivr.net/gh/Siberianwolf926/typora_images@master/img/202312271127157.png)